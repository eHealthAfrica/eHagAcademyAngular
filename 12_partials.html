<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>eHAG Academy - AngularJS</title>

    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body ng-app="myApp">

    <div class="container" ng-controller="myCtrl">

      <h1>Patient Record</h1>
      <table class="table table-condensed">
          <tr>
            <th>#</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Age</th>
            <th>Action</th>
          </tr>
          <tr ng-repeat="patient in patients">
            <td>{{patient.pid}}</td>
            <td>{{patient.first_name}}</td>
            <td>{{patient.last_name}}</td>
            <td>{{patient.age}}</td>
            <td><a href=""
              ng-click="selectPatient(patient.pid)">View</a></td>
          </tr>
      </table>

      <hr />

      <div ng-include="'partials/patient.html'"></div>


    </div>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/angular/angular.min.js"></script>

    <script type="text/javascript">
      var app = angular.module("myApp", []);
      app.controller("myCtrl", function($scope) {
        $scope.patients = {
          "1": {
            "pid":"1",
            "first_name":"John",
            "last_name":"Doe",
            "age":30
          },
          "2": {
            "pid":"2",
            "first_name":"Samuel",
            "last_name":"Mesfin",
            "age":100
          },
          "3": {
            "pid":"3",
            "first_name":"Moussa",
            "last_name":"Traore",
            "age":2
          },
          "4": {
            "pid":"4",
            "first_name":"Moustapha",
            "last_name":"Bah",
            "age":2
          }
        };

        $scope.currentPatient = null;

        $scope.selectPatient = function(pid) {
          $scope.currentPatient = $scope.patients[pid];
          console.log($scope.currentPatient);
        };

      });
    </script>

  </body>
</html>
